<%- include('partials/header') %>

                    <h1>Manage Properties</h1>
                    <a href="/admin/properties/add">Add New Property</a><br>
                    <a href="/profile"> back to profile</a>



                    <!-- <b>Name:</b>   -->
                    <ol>
                        <table class="customers">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Property ID</th>
                                    <th>Location</th>
                                    <th>Type</th>
                                    <th>Amenities</th>
                                    <th>Description</th>
                                    <th>Rooms</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% properties.forEach(property=> { %>

                                    <tr>
                                        <td>
                                            <li>
                                                <%= property.propertyName %>
                                            </li>
                                        </td>

                                        <td>
                                            <li>
                                                <%= property._id %>
                                            </li>
                                        </td>
                                        <!--  -->
                                        <td>
                                            <ul>
                                                <% property.locations.forEach(location=> { %>
                                                    <li>
                                                        <%= location %>
                                                    </li>
                                                    <% }) %>
                                            </ul>
                                        </td>
                                        <td>
                                            <%= property.type %>
                                        </td>
                                        <td>
                                            <ul>
                                                <% property.amenities.forEach(amenity=> { %>
                                                    <li>
                                                        <%= amenity %>
                                                    </li>
                                                    <% }) %>
                                            </ul>
                                        </td>
                                        <td>
                                            <%= property.description %>
                                        </td>
                                        <td>
                                            <ul>
                                                <% property.rooms.forEach(room=> { %>
                                                    <li>
                                                        <%= room.type %>
                                                    </li>
                                                    <% }) %>
                                            </ul>
                                        </td>
                                        <td>
                                            <a href="/admin/properties/edit/<%= property._id %>">Edit</a><br>
                                            <form action="/admin/properties/delete/<%= property._id %>" method="POST"
                                                style="display:inline;" onsubmit="confirmAction('delete', event);">
                                                <button type="submit">Delete</button>
                                            </form>

                                            <a class="btn"
                                                href="/admin/view/<%= property._id %>? owner._id=<%= property._id %>">
                                                <button>View</button>
                                            </a>
                                        </td>
                                    </tr>

                                    <% }) %>
                            </tbody>
                        </table>
                    </ol>
                    <script>
                        function confirmAction(action, event) {
                            event.preventDefault(); // Prevent the form from submitting immediately
                            const confirmation = confirm(`Are you sure you want to ${action} this Property`);
                            if (confirmation) {
                                event.target.submit(); // Submit the form if confirmed
                            }
                        }
                    </script>

            </div>
            <!-- plugins:js -->
            <script src="../assets/vendors/js/vendor.bundle.base.js"></script>
            <!-- endinject -->
            <!-- Plugin js for this page-->
            <script src="../assets/vendors/chartjs/Chart.min.js"></script>
            <script src="../assets/vendors/jvectormap/jquery-jvectormap.min.js"></script>
            <script src="../assets/vendors/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
            <!-- End plugin js for this page-->
            <!-- inject:js -->
            <script src="../assets/js/material.js"></script>
            <script src="../assets/js/misc.js"></script>
            <!-- endinject -->
            <!-- Custom js for this page-->
            <script src="../assets/js/dashboard.js"></script>
            <!-- End custom js for this page-->
</body>

</html>